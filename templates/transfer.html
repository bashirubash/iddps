{% extends "base.html" %}
{% block content %}
<h2 class="mb-3">üí∏ Transfer Funds</h2>
<form id="transferForm" class="card p-3 shadow-sm">
  <div class="mb-3">
    <label class="form-label">From Account</label>
    <input type="text" class="form-control" name="from_account" required>
  </div>
  <div class="mb-3">
    <label class="form-label">To Account</label>
    <input type="text" class="form-control" name="to_account" required>
  </div>
  <div class="mb-3">
    <label class="form-label">Amount</label>
    <input type="number" class="form-control" name="amount" step="0.01" required>
  </div>
  <button type="submit" class="btn btn-success">Submit Transfer</button>
</form>

<div id="result" class="alert mt-3 d-none"></div>

<script>
document.getElementById("transferForm").addEventListener("submit", async e => {
  e.preventDefault();
  let formData = Object.fromEntries(new FormData(e.target).entries());
  let res = await fetch("/api/transfer", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(formData)
  });
  let data = await res.json();
  let result = document.getElementById("result");
  result.classList.remove("d-none", "alert-success", "alert-danger");
  if(res.ok) {
    result.classList.add("alert-success");
    result.textContent = "‚úÖ Transfer successful! " + JSON.stringify(data);
  } else {
    result.classList.add("alert-danger");
    result.textContent = "‚ùå Transfer failed: " + JSON.stringify(data);
  }
});
</script>
{% endblock %}
